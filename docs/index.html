<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Retro Ticker</title>
  <!-- base removed -->
  <style>
    :root {
      --bg: #050805;
      --green: #39ff14;
      --green-dim: #1bb30b;
      --grid: rgba(57, 255, 20, 0.08);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; background: var(--bg); color: var(--green);
      font-family: "IBM Plex Mono", "Courier New", monospace;
      overflow: hidden; height: 100vh; width: 100vw;
    }
    .scanlines {
      position: fixed; inset: 0; pointer-events: none;
      background: repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,0) 0px,
        rgba(0,0,0,0) 2px,
        rgba(0,0,0,0.15) 3px,
        rgba(0,0,0,0.15) 4px
      );
      mix-blend-mode: multiply;
    }
    .grid {
      position: fixed; inset: 0; pointer-events: none;
      background:
        linear-gradient(var(--grid) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid) 1px, transparent 1px);
      background-size: 40px 40px;
      opacity: 0.4;
    }
    .wrap { padding: 24px; height: 100%; display: flex; flex-direction: column; gap: 16px; }
    .title {
      font-size: 20px; letter-spacing: 2px; text-transform: uppercase;
      text-shadow: 0 0 8px rgba(57,255,20,0.6);
    }
    .stats { display: grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 16px; }
    .card {
      border: 1px solid var(--green-dim); padding: 12px;
      background: rgba(0, 20, 0, 0.4);
      box-shadow: inset 0 0 12px rgba(57,255,20,0.15);
    }
    .label { font-size: 12px; color: var(--green-dim); }
    .value { font-size: 22px; margin-top: 6px; }
    .ticker {
      border: 1px solid var(--green-dim);
      padding: 10px 0; overflow: hidden; white-space: nowrap;
      background: rgba(0, 20, 0, 0.5);
      box-shadow: inset 0 0 12px rgba(57,255,20,0.15);
    }
    .ticker span {
      display: inline-block; padding-left: 100%;
      animation: scroll 30s linear infinite;
      text-shadow: 0 0 6px rgba(57,255,20,0.5);
    }
    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }
    .footer { font-size: 12px; color: var(--green-dim); }
    .blink { animation: blink 1.2s step-end infinite; }
    @keyframes blink { 50% { opacity: 0; } }
    @media (max-width: 900px) {
      .stats { grid-template-columns: repeat(2, minmax(0,1fr)); }
      .value { font-size: 18px; }
    }
  </style>
</head>
<body>
  <div class="grid"></div>
  <div class="scanlines"></div>
  <div class="wrap">
    <div class="title">Retro Market Ticker <span class="blink">▮</span></div>
    <div class="stats" id="stats">
      <!-- STATS_HTML --><div class="card"><div class="label">Balance</div><div class="value">$0.00</div></div><div class="card"><div class="label">Exposure</div><div class="value">$15.99</div></div><div class="card"><div class="label">Positions</div><div class="value">10</div></div><div class="card"><div class="label">PnL</div><div class="value">-$16.26</div></div><!-- TICKER_TEXT -->BUY NO Will All the Empty Rooms win Best Documentary Short Film at the 98th Academy Awards? $0.430 (6.40)  •  BUY NO Will the highest temperature in London be 6°C on February 14? $0.226 (12.13)  •  BUY NO Men's Group B - Sweden vs. Slovakia $0.130 (21.08)  •  REDEEM NO Will the highest temperature in Chicago be between 38-39°F on February 11? $0.000 (0.00)  •  REDEEM YES Will the highest temperature in London be 12°C on February 11? $0.000 (0.00)<!-- UPDATED_AT --></div>
  </div>

  <script>
    window.TICKER_DATA = {"balanceUsd":"$0.00","exposureUsd":"$0.00","positionsCount":0,"totalPnlUsd":"$0.00","lastTrades":[{"side":"no","symbol":"UNKNOWN","price":"--","size":"--"},{"side":"no","symbol":"UNKNOWN","price":"--","size":"--"},{"side":"no","symbol":"UNKNOWN","price":"--","size":"--"},{"side":"no","symbol":"UNKNOWN","price":"--","size":"--"},{"side":"yes","symbol":"UNKNOWN","price":"--","size":"--"}],"updatedAt":"2/16/2026, 1:21:30 AM ET"};
    function render(data) {
      const stats = document.getElementById('stats');
      stats.innerHTML = '';

      const cards = [
        ['Balance', data.balanceUsd],
        ['Exposure', data.exposureUsd],
        ['Positions', data.positionsCount],
        ['PnL', data.totalPnlUsd],
      ];
      for (const [label, value] of cards) {
        const el = document.createElement('div');
        el.className = 'card';
        el.innerHTML = `<div class="label">${label}</div><div class="value">${value}</div>`;
        stats.appendChild(el);
      }

      const trades = (data.lastTrades || []).map(t => `${t.side} ${t.symbol} ${t.price} (${t.size})`).join('  •  ');
      document.getElementById('tickerText').textContent = trades || 'NO RECENT TRADES';
      document.getElementById('updated').textContent = `Last update: ${data.updatedAt}`;
    }

    async function load() {
      try {
        if (window.TICKER_DATA) {
          render(window.TICKER_DATA);
          return;
        }
        const res = await fetch(`https://richducat.github.io/retro-ticker/data.json?ts=${Date.now()}`, { cache: 'no-store' });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        render(data);
      } catch (e) {
        document.getElementById('tickerText').textContent = 'DATA LOAD ERROR';
        document.getElementById('updated').textContent = `Last update: ERROR (${e.message})`;
      }
    }

    load();
    // refresh view hourly
    setInterval(load, 60 * 60 * 1000);
  </script>
</body>
</html>
